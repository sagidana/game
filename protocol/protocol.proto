syntax = "proto3";

enum Status {
  Ok = 0;
  Error = 1;
  AlreadyConnected = 2;
}

message Hello {
  string id = 1;
}

message Bye {
  Status status = 1;
}

enum ActionType {
  Disconnect = 0;
  MoveUp = 1;
  MoveDown = 2;
  MoveRight = 3;
  MoveLeft = 4;
}

message PlayerMessage {
  ActionType action = 1;
}

message PlayerUpdate {
  string id = 1;
  uint32 x = 2;
  uint32 y = 3;
}

message MapUpdate {
  uint32 x = 1;
  uint32 y = 2;

  uint32 width = 3;
  uint32 height = 4;

  repeated uint32 data = 5;
}

message ServerMessage {
  optional PlayerUpdate current = 1;
  repeated PlayerUpdate players_updates = 2;
  optional MapUpdate map_update = 3;
}
